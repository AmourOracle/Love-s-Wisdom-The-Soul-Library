/* 添加到 style.css 文件中的新樣式，實現視差滾動效果 */

/* 視差滾動動畫關鍵幀定義 */
@keyframes slideOutUp {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(-50px);
    opacity: 0;
  }
}

@keyframes slideInUp {
  from {
    transform: translateY(50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes parallaxBgOut {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(-20px); /* 背景移動速度較慢，產生視差效果 */
  }
}

@keyframes parallaxBgIn {
  from {
    transform: translateY(20px); /* 背景移動速度較慢，產生視差效果 */
  }
  to {
    transform: translateY(0);
  }
}

/* 淡出時的視差效果 */
.container.animating[data-direction="out"] .card-background,
.container.animating[data-direction="out"] .question-container {
  animation: parallaxBgOut 0.6s ease-out forwards;
}

.container.animating[data-direction="out"] .card-header,
.container.animating[data-direction="out"] .question {
  animation: slideOutUp 0.5s ease-out forwards;
}

.container.animating[data-direction="out"] .card-body,
.container.animating[data-direction="out"] .options-container {
  animation: slideOutUp 0.55s ease-out forwards;
}

.container.animating[data-direction="out"] .card-footer {
  animation: slideOutUp 0.6s ease-out forwards;
}

/* 淡入時的視差效果 */
.container.animating[data-direction="in"] .card-background,
.container.animating[data-direction="in"] .question-container {
  animation: parallaxBgIn 0.6s ease-out forwards;
}

.container.animating[data-direction="in"] .card-header,
.container.animating[data-direction="in"] .question {
  animation: slideInUp 0.5s ease-out forwards;
}

.container.animating[data-direction="in"] .card-body,
.container.animating[data-direction="in"] .options-container {
  animation: slideInUp 0.55s ease-out forwards;
}

.container.animating[data-direction="in"] .card-footer {
  animation: slideInUp 0.6s ease-out forwards;
}

/* 選項點擊時的視差效果 */
.container.animating[data-direction="slide-up"] .question {
  animation: slideOutUp 0.4s ease-out forwards;
}

.container.animating[data-direction="slide-up"] .options-container {
  animation: slideOutUp 0.5s ease-out forwards;
}

.container.animating[data-direction="slide-up"] .option {
  animation: slideOutUp calc(0.4s + var(--option-index, 0) * 0.05s) ease-out forwards;
}

.container.animating[data-direction="slide-up"] .question-container {
  animation: parallaxBgOut 0.6s ease-out forwards;
}

/* 問題切換時的視差效果 */
.container.animating[data-direction="transition"] .question-container {
  animation: parallaxBgOut 0.4s ease-out, parallaxBgIn 0.4s ease-out 0.4s;
}

.container.animating[data-direction="transition"] .question {
  animation: slideOutUp 0.3s ease-out, slideInUp 0.3s ease-out 0.4s;
}

.container.animating[data-direction="transition"] .options-container {
  animation: slideOutUp 0.4s ease-out, slideInUp 0.4s ease-out 0.4s;
}

/* 移除選項的延遲動畫，改為根據索引設置動態延遲 */
.container.animating .option:nth-child(1) { --option-index: 0; }
.container.animating .option:nth-child(2) { --option-index: 1; }
.container.animating .option:nth-child(3) { --option-index: 2; }
.container.animating .option:nth-child(4) { --option-index: 3; }
.container.animating .option:nth-child(5) { --option-index: 4; }

/* 確保所有元素在動畫前設置正確的初始狀態 */
.screen-container:not(.active) .card-header,
.screen-container:not(.active) .card-body,
.screen-container:not(.active) .card-footer,
.screen-container:not(.active) .question,
.screen-container:not(.active) .options-container {
  opacity: 0;
}